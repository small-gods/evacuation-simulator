{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/helpers.ts","webpack:///./src/main.ts","webpack:///./src/scenes/boot-scene.ts","webpack:///./src/scenes/game-scene.ts","webpack:///./src/scenes/index.ts","webpack:///./src/simulation/body-factory.ts","webpack:///./src/simulation/objects.ts","webpack:///./src/simulation/person.ts","webpack:///./src/simulation/utils.ts","webpack:///./src/simulation/world-serializer.ts","webpack:///./src/simulation/world.ts"],"names":[],"mappings":"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","file":"app.bundle.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([\"./src/main.ts\",\"vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import { resolve } from 'path/posix';\nimport * as Phaser from 'phaser'\nimport protobuf = require('protobufjs');\nimport { encode } from 'querystring';\n\nexport function getGameWidth(scene: Phaser.Scene): number {\n    return scene.game.scale.width\n}\n\nexport function getGameHeight(scene: Phaser.Scene): number {\n    return scene.game.scale.height\n}\n\nexport function protobufToBase64(\n    filename: (string | string[]),\n    type: (string | string[]),\n    message: { [k: string]: any },\n    callback: (string) => void) {\n    protobuf.load(filename, (err, root) => {\n        if (err) throw err;\n        const MessageType = root.lookupType(type);\n\n        const errMsg = MessageType.verify(message);\n        if (errMsg) throw Error(errMsg);\n\n        const result = MessageType.create(message);\n        const buffer = MessageType.encode(result).finish();\n        callback(base64EncArr(buffer));\n    });\n}\n\nexport function protobufToBase64Promise(\n    filename: string | string[],\n    type: string | string[],\n    message: { [k: string]: unknown },\n): Promise<string> {\n    return new Promise(resolve => {\n        protobufToBase64(filename, type, message, resolve)\n    })\n}\n\nexport function protobufFromBase64(\n    filename: (string | string[]),\n    type: (string | string[]),\n    message: string,\n    callback: (any) => void) {\n    protobuf.load(filename, (err, root) => {\n        if (err) throw err;\n        const MessageType = root.lookupType(type);\n        const buffer = base64DecToArr(message);\n        const source = MessageType.decode(buffer);\n        var object = MessageType.toObject(source, {});\n        callback(object);\n    });\n}\n\nexport const isDesigner = document.URL.includes(\"designer\");\n\n\nfunction b64ToUint6(nChr: number): number {\n    return nChr > 64 && nChr < 91 ? nChr - 65\n        : nChr > 96 && nChr < 123 ? nChr - 71\n            : nChr > 47 && nChr < 58 ? nChr + 4\n                : nChr === 43 ? 62\n                    : nChr === 47 ? 63 : 0;\n}\n\n\nfunction uint6ToB64(nUint6: number): number {\n    return nUint6 < 26 ? nUint6 + 65\n        : nUint6 < 52 ? nUint6 + 71\n            : nUint6 < 62 ? nUint6 - 4\n                : nUint6 === 62 ? 43\n                    : nUint6 === 63 ? 47 : 65;\n}\n\n\nexport function base64DecToArr(sBase64: string, nBlocksSize?: number): Uint8Array {\n    const sB64Enc = sBase64.replace(/[^A-Za-z0-9\\+\\/]/g, \"\");\n    const nInLen = sB64Enc.length;\n    const nOutLen = nBlocksSize ? Math.ceil((nInLen * 3 + 1 >> 2) / nBlocksSize) * nBlocksSize : nInLen * 3 + 1 >> 2;\n    let taBytes = new Uint8Array(nOutLen);\n\n    for (let nMod3, nMod4, nUint24 = 0, nOutIdx = 0, nInIdx = 0; nInIdx < nInLen; nInIdx++) {\n        nMod4 = nInIdx & 3;\n        nUint24 |= b64ToUint6(sB64Enc.charCodeAt(nInIdx)) << 6 * (3 - nMod4);\n        if (nMod4 === 3 || nInLen - nInIdx === 1) {\n            for (nMod3 = 0; nMod3 < 3 && nOutIdx < nOutLen; nMod3++, nOutIdx++) {\n                taBytes[nOutIdx] = nUint24 >>> (16 >>> nMod3 & 24) & 255;\n            }\n            nUint24 = 0;\n\n        }\n    }\n\n    console.log(taBytes.reduce((hist, x) => (hist[x]++, hist), new Array(256).fill(0)).map((count, i) => ([i, count])).sort(([, a], [, b]) => b - a).map(([i, count]) => `${i}: ${count}`))\n\n    return taBytes;\n}\n\n\nexport function base64EncArr(aBytes: Uint8Array): string {\n    let nMod3 = 2;\n    let sB64Enc = \"\";\n\n    for (let nLen = aBytes.length, nUint24 = 0, nIdx = 0; nIdx < nLen; nIdx++) {\n        nMod3 = nIdx % 3;\n        if (nIdx > 0 && (nIdx * 4 / 3) % 76 === 0) { sB64Enc += \"\\r\\n\"; }\n        nUint24 |= aBytes[nIdx] << (16 >>> nMod3 & 24);\n        if (nMod3 === 2 || aBytes.length - nIdx === 1) {\n            sB64Enc += String.fromCharCode(uint6ToB64(nUint24 >>> 18 & 63), uint6ToB64(nUint24 >>> 12 & 63), uint6ToB64(nUint24 >>> 6 & 63), uint6ToB64(nUint24 & 63));\n            nUint24 = 0;\n        }\n    }\n\n    return sB64Enc.substr(0, sB64Enc.length - 2 + nMod3) + (nMod3 === 2 ? '' : nMod3 === 1 ? '=' : '==');\n}\n","import * as Phaser from 'phaser'\nimport Scenes from './scenes'\nimport { isDesigner } from './helpers'\n\nconst content = document.querySelector('#content') as HTMLDivElement\n\nconst gameConfig: Phaser.Types.Core.GameConfig = {\n    title: 'Sample',\n\n    type: Phaser.AUTO,\n\n    scale: {\n        width: content.clientWidth,\n        height: content.clientHeight,\n    },\n\n    scene: Scenes,\n\n    physics: {\n        default: 'arcade',\n        arcade: {\n            debug: isDesigner,\n        },\n    },\n\n    parent: content,\n    backgroundColor: '#f5f5f5',\n}\n\nexport const game = new Phaser.Game(gameConfig)\n\nwindow.addEventListener('resize', () => {\n    game.scale.refresh()\n})\n","import { getGameWidth, getGameHeight } from '../helpers'\n\nconst sceneConfig: Phaser.Types.Scenes.SettingsConfig = {\n    active: false,\n    visible: false,\n    key: 'Boot',\n}\n\n/**\n * The initial scene that loads all necessary assets to the game and displays a loading bar.\n */\nexport class BootScene extends Phaser.Scene {\n    constructor() {\n        super(sceneConfig)\n    }\n\n    public preload(): void {\n        const halfWidth = getGameWidth(this) * 0.5\n        const halfHeight = getGameHeight(this) * 0.5\n\n        const progressBarHeight = 100\n        const progressBarWidth = 400\n\n        const progressBarContainer = this.add.rectangle(\n            halfWidth,\n            halfHeight,\n            progressBarWidth,\n            progressBarHeight,\n            0x000000,\n        )\n        const progressBar = this.add.rectangle(\n            halfWidth + 20 - progressBarContainer.width * 0.5,\n            halfHeight,\n            10,\n            progressBarHeight - 20,\n            0x888888,\n        )\n\n        const loadingText = this.add.text(halfWidth - 75, halfHeight - 100, 'Loading...').setFontSize(24)\n        const percentText = this.add.text(halfWidth - 25, halfHeight, '0%').setFontSize(24)\n        const assetText = this.add.text(halfWidth - 25, halfHeight + 100, '').setFontSize(24)\n\n        this.load.on('progress', value => {\n            progressBar.width = (progressBarWidth - 30) * value\n\n            const percent = value * 100\n            percentText.setText(`${percent}%`)\n        })\n\n        this.load.on('fileprogress', file => {\n            assetText.setText(file.key)\n        })\n\n        this.load.on('complete', () => {\n            loadingText.destroy()\n            percentText.destroy()\n            assetText.destroy()\n            progressBar.destroy()\n            progressBarContainer.destroy()\n\n            this.scene.start('Game')\n        })\n\n        this.loadAssets()\n    }\n\n    /**\n     * All assets that need to be loaded by the game (sprites, images, animations, tiles, music, etc)\n     * should be added to this method. Once loaded in, the loader will keep track of them, indepedent of which scene\n     * is currently active, so they can be accessed anywhere.\n     */\n    private loadAssets() {\n        // Load sample assets\n\n        // Source: Open Game Art\n        this.load.image('man', 'assets/sprites/character.png')\n        this.load.image('arrow-up', 'assets/sprites/arrow-up.png')\n        this.load.image('arrow-down', 'assets/sprites/arrow-down.png')\n        this.load.image('arrow-right', 'assets/sprites/arrow-right.png')\n        this.load.image('arrow-left', 'assets/sprites/arrow-left.png')\n        this.load.image('wall', 'assets/sprites/wall.png')\n        this.load.image('fire', 'assets/sprites/fire.png')\n        this.load.image('exit', 'assets/sprites/exit.png')\n        if (new URL(window.location.href).searchParams.has('INSIDE'))\n            this.load.spritesheet('man_animaited', 'assets/sprites/character_anim_inside.png', {\n                frameWidth: 13 * 2,\n                frameHeight: 23 * 2,\n            })\n        else\n            this.load.spritesheet('man_animaited', 'assets/sprites/character_anim.png', {\n                frameWidth: 13,\n                frameHeight: 23,\n            })\n        this.load.spritesheet('fire_animaited', 'assets/sprites/fire_anim.png', { frameWidth: 60, frameHeight: 60 })\n\n        const soundPath = name => `assets/sounds/${name}`\n        this.load.audio('fire-new', ['new_fire.ogg', 'new_fire.mp3'].map(soundPath))\n        this.load.audioSprite('exit', soundPath('exit.json'), ['exit.ogg'].map(soundPath))\n        this.load.audioSprite('die', soundPath('die.json'), ['die.ogg'].map(soundPath))\n    }\n}\n","import { Direction, Vector } from '../simulation/utils'\nimport { cellSize, World, WorldJson } from '../simulation/world'\nimport { BodyFactory } from '../simulation/body-factory'\nimport { base64DecToArr, protobufFromBase64, protobufToBase64, protobufToBase64Promise } from '../helpers'\nimport {\n    WorldJsonFromIntArray,\n    WorldJsonToIntArray,\n    WorldJsonFromBitsIntArray,\n    WorldJsonToBitsIntArray,\n} from '../simulation/world-serializer'\n\nconst sceneConfig: Phaser.Types.Scenes.SettingsConfig = {\n    active: false,\n    visible: false,\n    key: 'Game',\n}\n\ntype Unpacked<T> = T extends ReadonlyArray<infer U> ? U : unknown\n\nexport class GameScene extends Phaser.Scene {\n    private world: World\n\n    private burned = 0\n    private escaped = 0\n\n    constructor() {\n        super(sceneConfig)\n    }\n\n    buttonEvents = {\n        actor: (p: Vector) => {\n            this.world.addActor(p.x, p.y)\n        },\n        'arrow-right': (p: Vector) => {\n            this.world.addArrow(this.world.absoluteToCell(p), Direction.RIGHT)\n        },\n        'arrow-left': (p: Vector) => {\n            this.world.addArrow(this.world.absoluteToCell(p), Direction.LEFT)\n        },\n        'arrow-up': (p: Vector) => {\n            this.world.addArrow(this.world.absoluteToCell(p), Direction.UP)\n        },\n        'arrow-down': (p: Vector) => {\n            this.world.addArrow(this.world.absoluteToCell(p), Direction.DOWN)\n        },\n        exit: (p: Vector) => {\n            this.world.addExit(this.world.absoluteToCell(p))\n        },\n        wall: (p: Vector) => {\n            this.world.addWall(p)\n        },\n        fire: (p: Vector) => {\n            this.world.addFire(this.world.absoluteToCell(p))\n        },\n        delete: (p: Vector) => {\n            this.world.delete(p)\n        },\n    }\n\n    public create(): void {\n        this.sound.pauseOnBlur = false\n        const $counters = document.querySelector('.counters') as HTMLDivElement\n        const countersTypes = ['actors', 'burned', 'escaped', 'arrows'] as const\n        const soundVolume = document.createElement('input')\n        soundVolume.title = 'sound'\n        soundVolume.type = 'range'\n        soundVolume.min = '0'\n        soundVolume.max = '100'\n        soundVolume.value = '50'\n        soundVolume.addEventListener('input', () => {\n            this.sound.volume = parseFloat(soundVolume.value) / 50\n        })\n        const soundLable = document.createElement('label')\n        soundLable.textContent = 'Sound: '\n        soundLable.appendChild(soundVolume)\n        document.body.append(soundLable)\n        const counters = Object.fromEntries(\n            countersTypes.map(counter => {\n                const dom = document.createElement('div')\n                dom.className = `counter ${counter}`\n                dom.innerText = `0`\n                $counters.appendChild(dom)\n                return [counter, dom]\n            }),\n        ) as Record<Unpacked<typeof countersTypes>, HTMLDivElement>\n\n        const gridCenter = (cellSize * 15) / 2\n        const gridSize = cellSize * 16\n        const debugGrid = this.add.grid(\n            gridCenter,\n            gridCenter,\n            gridSize,\n            gridSize,\n            cellSize,\n            cellSize,\n            null,\n            null,\n            0xff00ff,\n            0.1,\n        )\n\n        const actionButtons = document.querySelectorAll('.action-button')\n        // eslint-disable-next-line @typescript-eslint/no-empty-function\n        let onButtonAction = (p: Vector) => {}\n        let lastCursor = ''\n        actionButtons.forEach(button => {\n            const type = button.getAttribute('data-object')\n            if (type === 'kill-all') {\n                button.addEventListener('click', () => {\n                    this.world.stopSimulation()\n                    document.body.style.cursor = lastCursor\n                    debugGrid.visible = true\n                })\n                return\n            } else if (type === 'spawn-all') {\n                button.addEventListener('click', () => {\n                    document.body.style.cursor = ``\n                    this.burned = 0\n                    this.escaped = 0\n                    counters.burned.textContent = this.burned + ''\n                    counters.escaped.textContent = this.escaped + ''\n                    debugGrid.visible = false\n                    this.world.runSimulation()\n                })\n                return\n            } else if (!(type in this.buttonEvents)) {\n                return\n            }\n            const callback = this.buttonEvents[type]\n            const img = button.querySelector('img')\n            const cursorImg = makeCursorFromImg(img, 32)\n            button.addEventListener('click', () => {\n                onButtonAction = callback\n                lastCursor = cursorImg\n                if (!this.world.isRunning()) document.body.style.cursor = lastCursor\n            })\n        })\n\n        const content = document.querySelector('#content')\n        content.addEventListener('click', (e: MouseEvent) => {\n            if (this.world.isRunning()) return\n            const rect = content.getBoundingClientRect()\n            onButtonAction({ x: e.x - rect.x, y: e.y - rect.y })\n        })\n\n        this.anims.create({ key: 'run', frames: this.anims.generateFrameNumbers('man_animaited', {}), frameRate: 16 })\n        this.anims.create({ key: 'fire', frames: this.anims.generateFrameNumbers('fire_animaited', {}), frameRate: 4 })\n\n        const bodyFactory = new BodyFactory(\n            this,\n            (fire, person) => {\n                this.sound.playAudioSprite('die', Phaser.Math.RND.between(0, 7).toString(), { volume: 0.5 })\n                this.world.deletePersonBySprite(person)\n                this.burned += 1\n                counters.burned.textContent = this.burned + ''\n            },\n            person => {\n                this.sound.playAudioSprite('exit', Phaser.Math.RND.between(0, 3).toString(), { volume: 0.4 })\n                this.world.deletePersonBySprite(person)\n                this.escaped += 1\n                counters.escaped.textContent = this.escaped + ''\n            },\n        )\n\n        const worldCreator = (json: WorldJson) =>\n            new World({ x: 13, y: 13 }, bodyFactory, json, world => {\n                counters.arrows.innerHTML = `${world.arrows.length}/&#8734`\n                counters.actors.textContent = `${world.actors.length}/${world.potentialActorsCount}`\n                // if (world.isRunning() && world.actors.length === 0) alert('GAME OVER')\n            })\n\n        const loadJsonButton = document.querySelector('#worldjson-load')\n        const saveJsonButton = document.querySelector('#worldjson-save')\n        const getLinkButton = document.querySelector('#worldjson-get-link')\n        const clipboardLinkButton = document.querySelector('#worldjson-copy-link')\n        const openLinkButton = document.querySelector('#worldjson-open-link')\n        const setLinkButton = document.querySelector('#worldjson-active-link')\n\n        const worldJsonText = document.querySelector('#worldjson') as HTMLInputElement\n        if (loadJsonButton)\n            loadJsonButton.addEventListener('click', () => {\n                console.log(JSON.parse(worldJsonText.value))\n                this.world.deleteAll()\n                this.world = worldCreator(JSON.parse(worldJsonText.value))\n            })\n        if (saveJsonButton)\n            saveJsonButton.addEventListener('click', () => {\n                worldJsonText.value = JSON.stringify(this.world.toJson())\n            })\n        if (getLinkButton)\n            getLinkButton.addEventListener('click', () => {\n                this.getLevelUrl().then(url => {\n                    worldJsonText.value = url\n                    worldJsonText.focus()\n                    worldJsonText.setSelectionRange(0, worldJsonText.value.length)\n                })\n            })\n        if (clipboardLinkButton)\n            clipboardLinkButton.addEventListener('click', () => {\n                this.getLevelUrl()\n                    .then(url => navigator.clipboard.writeText(url))\n                    .then(() => {\n                        clipboardLinkButton.classList.toggle('designer-button_success', true)\n                        setTimeout(() => clipboardLinkButton.classList.toggle('designer-button_success', false), 1000)\n                    })\n                    .catch(err => {\n                        console.error(err)\n                        clipboardLinkButton.classList.toggle('designer-button_failed', true)\n                        setTimeout(() => clipboardLinkButton.classList.toggle('designer-button_failed', false), 1000)\n                    })\n            })\n        if (openLinkButton)\n            openLinkButton.addEventListener('click', () => {\n                this.getLevelUrl().then(url => {\n                    const a = document.createElement('a')\n                    a.href = url\n                    a.target = '_blank'\n                    a.click()\n                })\n            })\n        if (setLinkButton)\n            setLinkButton.addEventListener('click', () => {\n                this.getLevelUrl('designer').then(url => window.history.pushState(undefined, '', url))\n            })\n\n        const levelButtons = document.querySelectorAll('.level-button')\n        levelButtons.forEach((button, i) => {\n            const url = button.getAttribute('data-object')\n            button.addEventListener('click', () => {\n                fetch(url)\n                    .then(resp => {\n                        return resp.json()\n                    })\n                    .then(resp => {\n                        this.world.deleteAll()\n                        this.world = worldCreator(resp)\n                    })\n            })\n        })\n\n        this.world = worldCreator({})\n        const params = new URL(window.location.href).searchParams\n        const levelParamData = params.get('data')\n        const levelParamBuf = params.get('buf')\n        const levelParamBin = params.get('bin')\n        const levelParamBinBit = params.get('bit')\n\n        if (levelParamData) this.world = worldCreator(JSON.parse(atob(levelParamData)))\n        else if (levelParamBuf) {\n            protobufFromBase64('assets/proto/world.proto', 'world.World', levelParamBuf, object => {\n                this.world = worldCreator(object)\n            })\n        } else if (levelParamBin) {\n            protobufFromBase64('assets/proto/world.proto', 'world.Blob', levelParamBin, object => {\n                this.world = worldCreator(WorldJsonFromIntArray(object.data))\n            })\n        } else if (levelParamBinBit) {\n            protobufFromBase64('assets/proto/world.proto', 'world.Blob', levelParamBinBit, object => {\n                this.world = worldCreator(WorldJsonFromBitsIntArray(object.data))\n            })\n        } else if (levelButtons.length > 0) (levelButtons[0] as HTMLElement).click()\n    }\n\n    private getLevelUrl(mode: 'designer' | 'game' = 'game') {\n        const worldJson = this.world.toJson()\n        const intArr = WorldJsonToBitsIntArray(worldJson)\n        return protobufToBase64Promise('assets/proto/world.proto', 'world.Blob', { data: intArr }).then(lvl =>\n            toLevelUrl(mode, 'bit', lvl),\n        )\n    }\n\n    public update(): void {\n        this.world.tick()\n    }\n}\n\nfunction toLevelUrl(mode: 'designer' | 'game', paramName: string, lvl: string): string {\n    const url = new URL(window.location.href)\n    url.searchParams.forEach((v, k) => url.searchParams.delete(k))\n    url.searchParams.set(paramName, lvl)\n    if (mode === 'game') url.pathname = url.pathname.replace('designer.html', '')\n    return url.toString()\n}\n\nfunction makeCursorFromImg(img: HTMLImageElement, width = 32, height = width) {\n    const canvas = document.createElement('canvas')\n    canvas.height = canvas.width = 32\n    const ctx = canvas.getContext('2d')\n    ctx.drawImage(img, 0, 0, width, height)\n    const cursorImg = canvas.toDataURL('image/png')\n    return `url(${cursorImg}) ${width / 2} ${height / 2}, auto`\n}\n","import { BootScene } from './boot-scene'\nimport { GameScene } from './game-scene'\n\nexport default [BootScene, GameScene]\n","import { Scene } from 'phaser'\nimport { Direction, Vector } from './utils'\n\ntype Sprite = Phaser.Physics.Arcade.Sprite\n\nexport class BodyFactory {\n    private peopleGroup: Phaser.GameObjects.Group\n    private wallsGroup: Phaser.GameObjects.Group\n    private physics: Phaser.Physics.Arcade.ArcadePhysics\n    private burnCallback: (fire: Sprite, person: Sprite) => void\n    private escapeCallback: (person: Sprite) => void\n\n    public constructor(\n        scene: Scene,\n        burnCallback: (fire: Sprite, person: Sprite) => void,\n        escapeCallback: (person: Sprite) => void,\n    ) {\n        this.physics = scene.physics\n        this.peopleGroup = new Phaser.GameObjects.Group(scene)\n        this.wallsGroup = new Phaser.GameObjects.Group(scene)\n\n        this.physics.add.collider(this.peopleGroup, this.peopleGroup)\n        this.physics.add.collider(this.peopleGroup, this.wallsGroup)\n\n        this.burnCallback = burnCallback\n        this.escapeCallback = escapeCallback\n    }\n\n    public arrow(coords: Vector, direction: Direction): Phaser.Physics.Arcade.Sprite {\n        return this.physics.add.sprite(coords.x, coords.y, 'arrow-' + Direction[direction].toLowerCase())\n    }\n    public actor(x: number, y: number, r: number): Phaser.Physics.Arcade.Sprite {\n        const sprite = this.physics.add.sprite(x, y, 'man')\n        sprite.play({ key: 'run', repeat: -1, startFrame: (Math.random() * 10) | 0, frameRate: 4 })\n        sprite.setMaxVelocity(50)\n        sprite.body.bounce.set(1)\n        sprite.body.setCollideWorldBounds(true)\n\n        this.peopleGroup.add(sprite)\n        return sprite\n    }\n    public wall({ x, y }, { x: w, y: h }): Phaser.Physics.Arcade.Sprite {\n        const sprite = this.physics.add.staticSprite(x, y, 'wall')\n        sprite.body.setSize(w, h)\n        sprite.setScale(w / sprite.width, h / sprite.height)\n        this.wallsGroup.add(sprite)\n        return sprite\n    }\n    public fire({ x, y }, { x: w, y: h }): Phaser.Physics.Arcade.Sprite {\n        const sprite = this.physics.add.sprite(x, y, 'fire')\n        sprite.setScale(0)\n        sprite.play({\n            key: 'fire',\n            repeat: -1,\n            startFrame: Phaser.Math.RND.between(0, 4),\n            frameRate: Phaser.Math.RND.between(8, 10),\n        })\n        this.physics.scene.sound.play('fire-new', { volume: Phaser.Math.RND.realInRange(0.1, 0.2) })\n        this.physics.scene.tweens.timeline({\n            targets: sprite,\n            duration: Phaser.Math.RND.between(400, 1000),\n            tweens: [\n                {\n                    scaleX: w / sprite.width,\n                    scaleY: h / sprite.height,\n                },\n            ],\n        })\n        this.physics.add.overlap(sprite, this.peopleGroup, (fire, person) => {\n            this.burnCallback(fire as Sprite, person as Sprite)\n        })\n        return sprite\n    }\n    public exit({ x, y }, { x: w, y: h }): Phaser.Physics.Arcade.Sprite {\n        const sprite = this.physics.add.sprite(x, y, 'exit')\n        sprite.setScale(w / sprite.width, h / sprite.height)\n\n        this.physics.add.overlap(sprite, this.peopleGroup, (escape, person) => {\n            this.escapeCallback(person as Sprite)\n        })\n        return sprite\n    }\n}\n","import { Cell, Direction, directionVector, randomDirection, randomElement, Vector } from './utils'\nimport { World } from './world'\n\nexport class GameObject {\n    public cell: Cell\n    public sprite: Phaser.Physics.Arcade.Sprite\n\n    public constructor(coordinates: Cell, sprite: Phaser.Physics.Arcade.Sprite) {\n        this.cell = coordinates\n        this.sprite = sprite\n    }\n\n    public get x(): number {\n        return this.cell.x\n    }\n    public get y(): number {\n        return this.cell.y\n    }\n}\n\nexport class Arrow extends GameObject {\n    public direction: Direction\n\n    public constructor(coordinates: Cell, direction: Direction, sprite: Phaser.Physics.Arcade.Sprite) {\n        super(coordinates, sprite)\n        this.direction = direction\n    }\n\n    public get directionVector(): Vector {\n        return directionVector(this.direction)\n    }\n}\n\nexport class Fire extends GameObject {\n    public constructor(coordinates: Cell, sprite: Phaser.Physics.Arcade.Sprite) {\n        super(coordinates, sprite)\n    }\n\n    public tick(world: World) {\n        if (Math.random() >= 0.01) return\n\n        const possibleDirections: Direction[] = []\n\n        const fireCell = this.cell\n        if (!world.hasWallLoc(fireCell, 'Top')) possibleDirections.push(Direction.UP)\n        if (!world.hasWallLoc({ ...fireCell, y: fireCell.y + 1 }, 'Top')) possibleDirections.push(Direction.DOWN)\n        if (!world.hasWallLoc(fireCell, 'Left')) possibleDirections.push(Direction.LEFT)\n        if (!world.hasWallLoc({ ...fireCell, x: fireCell.x + 1 }, 'Left')) possibleDirections.push(Direction.RIGHT)\n\n        if (possibleDirections.length === 0) return\n\n        const dirVector = directionVector(randomElement(possibleDirections))\n        const growth = { x: this.x + dirVector.x, y: this.y + dirVector.y }\n        if (!world.inBounds(growth) || world.fires.some(v => v.x === growth.x && v.y === growth.y)) return\n\n        world.addFire(growth)\n    }\n}\n\nexport type WallLocation = 'Top' | 'Left'\n\nexport class Wall extends GameObject {\n    public location: WallLocation\n\n    public constructor(coordinates: Cell, location: WallLocation, sprite: Phaser.Physics.Arcade.Sprite) {\n        super(coordinates, sprite)\n        this.location = location\n    }\n\n    public line(cellSize: number): { a: Vector; b: Vector } {\n        if (this.location === 'Top') {\n            const left = this.sprite.getLeftCenter()\n            const right = this.sprite.getRightCenter()\n            return { a: { x: left.x, y: this.sprite.y }, b: { x: right.x, y: this.sprite.y } }\n        } else {\n            const top = this.sprite.getTopCenter()\n            const bottom = this.sprite.getBottomCenter()\n            return { a: { x: this.sprite.x, y: top.y }, b: { x: this.sprite.x, y: bottom.y } }\n        }\n    }\n}\n","import { GameObject } from './objects'\nimport { substract, Vector, length, distance, mul, randomRange } from './utils'\nimport { cellSize, World } from './world'\n\nfunction norm(v: Vector, mul = 1): Vector {\n    const l = length(v)\n    return { x: (mul * v.x) / l, y: (mul * v.y) / l }\n}\n\nexport class Person {\n    public sprite: Phaser.Physics.Arcade.Sprite\n    public vision = 200\n    public speed = 100\n    private text: Phaser.GameObjects.Text\n\n    public constructor(sprite: Phaser.Physics.Arcade.Sprite) {\n        this.sprite = sprite\n        const texts = ['', '', '', '', '!!!']\n        this.text = sprite.scene.add.text(sprite.x, sprite.y, Phaser.Utils.Array.GetRandom(texts), {\n            color: 'red',\n            backgroundColor: '#FFFFFFAA',\n            fontSize: '11px',\n        })\n        this.text.setVisible(false)\n    }\n\n    public destroy(): void {\n        this.sprite.destroy()\n        this.text.destroy()\n    }\n\n    public get x(): number {\n        return this.sprite.x\n    }\n    public get y(): number {\n        return this.sprite.y\n    }\n    public get coordinates(): Vector {\n        return { x: this.x, y: this.y }\n    }\n\n    public acceleration(object: Vector, arrowDirection: Vector = { x: 0, y: 0 }): Vector {\n        const toArrow = substract(object, this.coordinates)\n        toArrow.x /= length(toArrow)\n        toArrow.y /= length(toArrow)\n        return {\n            x: (toArrow.x + arrowDirection.x * 2) * this.speed,\n            y: (toArrow.y + arrowDirection.y * 2) * this.speed,\n        }\n    }\n\n    public accelerationOut(object: Vector, arrowDirection: Vector = { x: 0, y: 0 }): Vector {\n        const toArrow = substract(this.coordinates, object)\n        toArrow.x /= length(toArrow)\n        toArrow.y /= length(toArrow)\n        return {\n            x: (toArrow.x + arrowDirection.x * 2) * this.speed,\n            y: (toArrow.y + arrowDirection.y * 2) * this.speed,\n        }\n    }\n\n    public accelerate(object: Vector, arrowDirection: Vector = { x: 0, y: 0 }) {\n        const acceleration = this.acceleration(object, arrowDirection)\n        return acceleration\n    }\n\n    public accelerateOut(object: Vector, arrowDirection: Vector = { x: 0, y: 0 }) {\n        const acceleration = this.accelerationOut(object, arrowDirection)\n        this.sprite.setAcceleration(acceleration.x, acceleration.y)\n    }\n\n    public tick(world: World): void {\n        const fire = this.findClosestObject(world.fires, world)\n        const vectors = new Array<Vector>()\n        this.text.x = this.sprite.x\n        this.text.y = this.sprite.y - this.sprite.height\n        this.text.setVisible(fire !== false)\n        const exit = this.findClosestObject(world.exits, world)\n        if (exit) {\n            vectors.push(norm(substract(world.cellToVector(exit), this.coordinates)))\n            const { x, y } = norm(vectors.reduce((sum, v) => ({ x: sum.x + v.x, y: sum.y + v.y })))\n            this.sprite.setAcceleration(x * this.speed, y * this.speed)\n        }\n\n        const arrow = this.findClosestObject(world.arrows, world)\n        if (arrow) {\n            const dist = distance(this.coordinates, world.cellToVector(arrow)) / cellSize\n            vectors.push(norm(this.accelerate(world.cellToVector(arrow.cell), arrow.directionVector), 1 / (1 + dist)))\n            const { x, y } = norm(vectors.reduce((sum, v) => ({ x: sum.x + v.x, y: sum.y + v.y })))\n            this.sprite.setAcceleration(x * this.speed, y * this.speed)\n            return\n        }\n        if (fire) {\n            const dist = distance(this.coordinates, world.cellToVector(fire)) / cellSize\n            vectors.push(norm(substract(this.coordinates, world.cellToVector(fire)), 4 / (2 + dist)))\n        }\n        vectors.push(norm({ x: randomRange(-this.speed, this.speed), y: randomRange(-this.speed, this.speed) }))\n        const { x, y } = norm(vectors.reduce((sum, v) => ({ x: sum.x + v.x, y: sum.y + v.y })))\n        this.sprite.setAcceleration(x * this.speed, y * this.speed)\n    }\n\n    private findClosestObject<O extends GameObject>(objects: O[], world: World): O | false {\n        const objDistances = objects.map(obj => distance(this.coordinates, world.cellToVector(obj.cell)))\n\n        let minExitDistance = Infinity\n        let obj: O | null = null\n        for (const i in objDistances) {\n            if (world.collidesWithWall(world.cellToVector(objects[i].cell), this.coordinates)) {\n                continue\n            }\n            if (minExitDistance > objDistances[i]) {\n                minExitDistance = objDistances[i]\n                obj = objects[i]\n            }\n        }\n\n        return minExitDistance < this.vision && obj\n    }\n}\n","import { Dir } from \"fs\"\n\nexport enum Direction {\n    UP = 0,\n    DOWN = 1,\n    LEFT = 2,\n    RIGHT = 3,\n}\n\nexport type Vector = { x: number; y: number; type?: 'Vector' }\n\nexport type Cell = { x: number; y: number; type?: 'Cell' }\n\nexport function directionVector(direction: Direction): Vector {\n    return direction === Direction.UP\n        ? { x: 0, y: -1 }\n        : direction === Direction.DOWN\n        ? { x: 0, y: 1 }\n        : direction === Direction.LEFT\n        ? { x: -1, y: 0 }\n        : { x: 1, y: 0 }\n}\n\nexport function substract(a: Vector, b: Vector): Vector {\n    return { x: a.x - b.x, y: a.y - b.y }\n}\n\nexport function mul(a: Vector, b: number): Vector {\n    return { x: a.x * b, y: a.y * b }\n}\n\nexport function distance(from: Vector, to: Vector): number {\n    return Math.sqrt((from.x - to.x) ** 2 + (from.y - to.y) ** 2)\n}\n\nexport function length(vector: Vector): number {\n    return distance({ x: 0, y: 0 }, vector)\n}\n\nexport function randomRange(from, to: number): number {\n    return Math.random() * (to - from) + from\n}\n\nexport function randomInteger(from, to: number): number {\n    return Math.floor(randomRange(from, to))\n}\n\nexport function randomElement<T>(array: T[]): T {\n    return array[randomInteger(0, array.length)]\n}\n\nconst directions = [Direction.UP, Direction.DOWN, Direction.LEFT, Direction.RIGHT]\n\nexport function randomDirection(): Direction {\n    return randomElement(directions)\n}\n\nexport function collide(a1: Vector, b1: Vector, a2: Vector, b2: Vector): boolean {\n    const x1 = a1.x\n    const x2 = b1.x\n    const x3 = a2.x\n    const x4 = b2.x\n    const y1 = a1.y\n    const y2 = b1.y\n    const y3 = a2.y\n    const y4 = b2.y\n    const a_dx = x2 - x1\n    const a_dy = y2 - y1\n    const b_dx = x4 - x3\n    const b_dy = y4 - y3\n    const s = (-a_dy * (x1 - x3) + a_dx * (y1 - y3)) / (-b_dx * a_dy + a_dx * b_dy)\n    const t = (+b_dx * (y1 - y3) - b_dy * (x1 - x3)) / (-b_dx * a_dy + a_dx * b_dy)\n    return s >= 0 && s <= 1 && t >= 0 && t <= 1\n}\n","import { Cell, Direction } from './utils'\nimport { WorldJson } from './world'\n\nexport function WorldJsonToIntArray(json: WorldJson): number[] {\n    return [\n        ...VectorArrayToIntArray(json.actors),\n        ...ArrowsArrayToIntArray(json.arrows),\n        ...VectorArrayToIntArray(json.fires),\n        ...VectorArrayToIntArray(json.exits),\n        ...VectorArrayToIntArray(json.wallTops),\n        ...VectorArrayToIntArray(json.wallLefts),\n    ]\n}\n\nexport function WorldJsonFromIntArray(arr: number[]): WorldJson {\n    const result: WorldJson = {}\n    const iterator = { idx: 0 }\n\n    result.actors = VectorArrayFromIntArray(arr, iterator)\n    result.arrows = ArrowsArrayFromIntArray(arr, iterator)\n    result.fires = VectorArrayFromIntArray(arr, iterator)\n    result.exits = VectorArrayFromIntArray(arr, iterator)\n    result.wallTops = VectorArrayFromIntArray(arr, iterator)\n    result.wallLefts = VectorArrayFromIntArray(arr, iterator)\n\n    return result\n}\n\nexport function WorldJsonToBitsIntArray(json: WorldJson): number[] {\n    return [\n        ...VectorArrayToBitsIntArray(1, 10, json.actors),\n        ...ArrowsArrayToIntArray(json.arrows),\n        ...VectorArrayToBitsIntArray(3, 4, json.fires),\n        ...VectorArrayToBitsIntArray(3, 4, json.exits),\n        ...VectorArrayToBitsIntArray(3, 4, json.wallTops),\n        ...VectorArrayToBitsIntArray(3, 4, json.wallLefts),\n    ]\n}\n\nexport function WorldJsonFromBitsIntArray(arr: number[]): WorldJson {\n    const result: WorldJson = {}\n    const iterator = { idx: 0 }\n\n    result.actors = VectorArrayFromBitsIntArray(1, 10, arr, iterator)\n    result.arrows = ArrowsArrayFromIntArray(arr, iterator)\n    result.fires = VectorArrayFromBitsIntArray(3, 4, arr, iterator)\n    result.exits = VectorArrayFromBitsIntArray(3, 4, arr, iterator)\n    result.wallTops = VectorArrayFromBitsIntArray(3, 4, arr, iterator)\n    result.wallLefts = VectorArrayFromBitsIntArray(3, 4, arr, iterator)\n\n    return result\n}\n\nfunction VectorArrayToIntArray(arr?: { x: number; y: number }[]): number[] {\n    let result: (number | number[])[] = []\n    if (arr) {\n        result.push(arr.length)\n        arr.forEach(v => result.push([v.x, v.y]))\n    } else result.push(0)\n    return result.flat()\n}\n\nfunction ArrowsArrayToIntArray(arr?: { vec: Cell; dir: Direction }[]): number[] {\n    let result: (number | number[])[] = []\n    if (arr) {\n        result.push(arr.length)\n        arr.forEach(v => result.push([v.dir, v.vec.x, v.vec.y]))\n    } else result.push(0)\n    return result.flat()\n}\n\nfunction VectorArrayFromIntArray(arr: number[], iterator: { idx: number }): { x: number; y: number }[] {\n    let result: { x: number; y: number }[] = []\n    const len = arr[iterator.idx++]\n    for (let i = 0; i < len; ++i) {\n        result.push({\n            x: arr[iterator.idx++],\n            y: arr[iterator.idx++],\n        })\n    }\n    return result\n}\n\nfunction ArrowsArrayFromIntArray(arr: number[], iterator: { idx: number }): { vec: Cell; dir: Direction }[] {\n    let result: { vec: Cell; dir: Direction }[] = []\n    const len = arr[iterator.idx++]\n    for (let i = 0; i < len; ++i) {\n        result.push({\n            dir: arr[iterator.idx++],\n            vec: {\n                x: arr[iterator.idx++],\n                y: arr[iterator.idx++],\n            },\n        })\n    }\n    return result\n}\n\nfunction zipXY(intSize: number, v: { x: number; y: number }, shift: number): number {\n    return (v.x << (intSize + 2 * intSize * shift)) | (v.y << (2 * intSize * shift))\n}\n\nfunction getMask(bitsCount: number): number {\n    let mask = 1\n    for (let i = 0; i < bitsCount; ++i) mask *= 2\n    return mask - 1\n}\n\nfunction unzipXY(intSize: number, container: number, shift: number): { x: number; y: number } {\n    const mask = getMask(intSize)\n    return {\n        x: (container >> (intSize + 2 * intSize * shift)) & mask,\n        y: (container >> (2 * intSize * shift)) & mask,\n    }\n}\n\nfunction zipXYs(intSize: number, arr: { x: number; y: number }[]): number {\n    return arr.reduce((int, v, shift) => int | zipXY(intSize, v, shift), 0)\n}\n\nfunction unzipXYs(intSize: number, container: number, lenght: number): { x: number; y: number }[] {\n    return new Array(lenght).fill(0).map((_, i) => unzipXY(intSize, container, i))\n}\n\nfunction VectorArrayToBitsIntArray(batchSize: number, intSize: number, arr?: { x: number; y: number }[]): number[] {\n    const result: number[] = []\n    const n = batchSize\n    if (arr) {\n        result.push(arr.length)\n        for (let i = 0; i < ((arr.length / n) | 0); ++i) {\n            result.push(zipXYs(intSize, arr.slice(n * i, n * i + n)))\n        }\n        if (arr.length % n) {\n            const tmp = arr.slice(arr.length - (arr.length % n))\n            if (tmp.length != arr.length % n) {\n                throw new Error(`${tmp.length}:${arr.length % n}`)\n            }\n            result.push(zipXYs(intSize, tmp))\n        }\n    } else result.push(0)\n    return result\n}\n\nfunction VectorArrayFromBitsIntArray(\n    batchSize: number,\n    intSize: number,\n    arr: number[],\n    iterator: { idx: number },\n): { x: number; y: number }[] {\n    const result: { x: number; y: number }[] = []\n    const len = arr[iterator.idx++]\n    const n = batchSize\n    for (let i = 0; i < ((len / n) | 0); ++i) {\n        const value = arr[iterator.idx++]\n        result.push(...unzipXYs(intSize, value, n))\n    }\n    if (len % n) {\n        const value = arr[iterator.idx++]\n        result.push(...unzipXYs(intSize, value, (len % n) as 1 | 2 | 3))\n    }\n    return result\n}\n","import { json } from 'stream/consumers'\nimport { isDesigner } from '../helpers'\nimport { BodyFactory } from './body-factory'\nimport { Arrow, Fire, GameObject, Wall, WallLocation } from './objects'\nimport { Person } from './person'\nimport { Direction, randomRange, Vector, collide, Cell } from './utils'\n\nexport const cellSize = 50\n\nexport type WorldJson = {\n    actors?: Vector[]\n    arrows?: { vec: Cell; dir: Direction }[]\n    fires?: Cell[]\n    exits?: Cell[]\n    wallTops?: Cell[]\n    wallLefts?: Cell[]\n}\n\nexport class World {\n    public get potentialActorsCount(): number {\n        return this.worldJson.actors?.length || 0\n    }\n    public actors: Person[] = []\n    public arrows: Arrow[] = []\n    public fires: Fire[] = []\n    public exits: GameObject[] = []\n    public wallTops: Wall[] = []\n    public wallLefts: Wall[] = []\n\n    private bodyFactory: BodyFactory\n    private bounds: Vector\n    private worldJson: WorldJson\n    private runningSimulation = false\n\n    public constructor(\n        bounds: Vector,\n        bodyFactory: BodyFactory,\n        json: WorldJson,\n        private readonly onUpdate: (state: World) => void,\n    ) {\n        this.bounds = bounds\n        this.bodyFactory = bodyFactory\n        this.worldJson = json\n        this.reloadWorld(isDesigner, true)\n    }\n\n    private reloadWorld(spawnActors: boolean, spawnWorld) {\n        const json = this.worldJson\n        if (json.actors && spawnActors) for (const actor of json.actors) this.addActor(actor.x, actor.y)\n        if (json.fires && spawnActors) for (const actor of json.fires) this.addFire({ x: actor.x, y: actor.y })\n        if (json.arrows && spawnWorld) for (const actor of json.arrows) this.addArrow(actor.vec, actor.dir)\n        if (json.exits && spawnWorld) for (const actor of json.exits) this.addExit({ x: actor.x, y: actor.y })\n        if (json.wallLefts && spawnWorld)\n            for (const actor of json.wallLefts) this.addWallLoc({ x: actor.x, y: actor.y }, 'Left')\n        if (json.wallTops && spawnWorld)\n            for (const actor of json.wallTops) this.addWallLoc({ x: actor.x, y: actor.y }, 'Top')\n    }\n\n    public runSimulation() {\n        if (this.runningSimulation) return\n        if (isDesigner) {\n            this.worldJson = this.toJson()\n        } else {\n            this.reloadWorld(true, false)\n        }\n        this.runningSimulation = true\n    }\n\n    public stopSimulation() {\n        if (!this.runningSimulation) return\n        this.runningSimulation = false\n        if (isDesigner) {\n            this.deleteAll()\n            this.reloadWorld(true, true)\n        } else {\n            this.killAll()\n        }\n    }\n\n    public isRunning(): boolean {\n        return this.runningSimulation\n    }\n\n    public toJson(): WorldJson {\n        return {\n            actors: this.actors.map(actor => actor.coordinates),\n            arrows: this.arrows.map(arrow => ({ vec: arrow.cell, dir: arrow.direction })),\n            fires: this.fires.map(actor => actor.cell),\n            exits: this.exits.map(actor => actor.cell),\n            wallLefts: this.wallLefts.map(actor => actor.cell),\n            wallTops: this.wallTops.map(actor => actor.cell),\n        }\n    }\n\n    // ** Deletion **\n\n    public delete(coordinates: Vector) {\n        if (this.runningSimulation) return\n\n        const cell = this.absoluteToCell(coordinates)\n        if (isDesigner) {\n            this.fires = filterGameObjects(cell, this.fires)\n            this.exits = filterGameObjects(cell, this.exits)\n            this.deleteWall(coordinates)\n        }\n        this.arrows = filterGameObjects(cell, this.arrows)\n        this.onUpdate(this)\n    }\n\n    public deleteAll() {\n        for (const actor of this.actors) actor.destroy()\n        this.actors = []\n        for (const actor of this.arrows) actor.sprite.destroy()\n        this.arrows = []\n        for (const actor of this.fires) actor.sprite.destroy()\n        this.fires = []\n        for (const actor of this.exits) actor.sprite.destroy()\n        this.exits = []\n        for (const actor of this.wallLefts) actor.sprite.destroy()\n        this.wallLefts = []\n        for (const actor of this.wallTops) actor.sprite.destroy()\n        this.wallTops = []\n        this.onUpdate(this)\n    }\n\n    // ** Actors **\n\n    public spawnManyActors(num = 25) {\n        for (let i = 0; i < num; i++) {\n            const { x, y } = {\n                x: randomRange(0, this.bounds.x * cellSize),\n                y: randomRange(0, this.bounds.y * cellSize),\n            }\n            this.addActor(x, y)\n        }\n    }\n\n    public addActor(x: number, y: number) {\n        const sprite = this.bodyFactory.actor(Math.floor(x), Math.floor(y), 0)\n        const person = new Person(sprite)\n        this.actors.push(person)\n        this.onUpdate(this)\n    }\n\n    public killAll() {\n        this.actors.forEach(actor => actor.destroy())\n        this.fires.forEach(actor => actor.sprite.destroy())\n        this.actors = []\n        this.fires = []\n        this.onUpdate(this)\n    }\n\n    public deletePersonBySprite(sprite: Phaser.Types.Physics.Arcade.GameObjectWithBody) {\n        this.actors = this.actors.filter(p => {\n            if (p.sprite != sprite) return true\n            p.sprite.body.checkCollision.none = true\n            p.sprite.scene.tweens.timeline({\n                targets: p.sprite,\n                duration: 500,\n                tweens: [\n                    {\n                        scale: 0,\n                    },\n                ],\n                onComplete: () => p.destroy(),\n            })\n            return false\n        })\n        this.onUpdate(this)\n    }\n\n    // ** Walls **\n\n    public addWall(coordinates: Vector) {\n        const { cell, loc } = this.getWallCell(coordinates)\n        if (this.hasWallLoc(cell, loc)) return\n        this.addWallLoc(cell, loc)\n    }\n\n    public hasWallLoc(cell: Cell, loc: WallLocation) {\n        if (loc === 'Top') {\n            return this.wallTops.some(v => v.x === cell.x && v.y === cell.y)\n        } else {\n            return this.wallLefts.some(v => v.x === cell.x && v.y === cell.y)\n        }\n    }\n\n    public collidesWithWall(a: Vector, b: Vector): boolean {\n        return (\n            this.wallTops.some(wall => {\n                const wallLine = wall.line(cellSize)\n                return collide(a, b, wallLine.a, wallLine.b)\n            }) ||\n            this.wallLefts.some(wall => {\n                const wallLine = wall.line(cellSize)\n                return collide(a, b, wallLine.a, wallLine.b)\n            })\n        )\n    }\n\n    private addWallLoc(cell: Cell, loc: WallLocation) {\n        if (loc === 'Top') {\n            const sprite = this.bodyFactory.wall(\n                { x: cell.x * cellSize, y: cell.y * cellSize - cellSize / 2 },\n                { x: cellSize + 10, y: 10 },\n            )\n            this.wallTops.push(new Wall(cell, 'Top', sprite))\n        } else {\n            const sprite = this.bodyFactory.wall(\n                { x: cell.x * cellSize - cellSize / 2, y: cell.y * cellSize },\n                { x: 10, y: cellSize + 10 },\n            )\n            this.wallLefts.push(new Wall(cell, 'Left', sprite))\n        }\n    }\n\n    public deleteWall(coordinates: Vector) {\n        const { cell, loc } = this.getWallCell(coordinates)\n        if (loc === 'Top') {\n            this.wallTops = filterGameObjects(cell, this.wallTops)\n        } else {\n            this.wallLefts = filterGameObjects(cell, this.wallLefts)\n        }\n    }\n\n    private getWallCell(coordinates: Vector): { cell: Cell; loc: WallLocation } {\n        const inCellX = (coordinates.x - cellSize / 2) % cellSize\n        const inCellY = (coordinates.y - cellSize / 2) % cellSize\n        const cell = this.absoluteToCell(coordinates)\n        if (inCellX > inCellY) {\n            if (cellSize - inCellY > inCellX) {\n                return { cell, loc: 'Top' }\n            } else {\n                return { cell: { x: cell.x + 1, y: cell.y }, loc: 'Left' }\n            }\n        } else {\n            if (cellSize - inCellY > inCellX) {\n                return { cell, loc: 'Left' }\n            } else {\n                return { cell: { x: cell.x, y: cell.y + 1 }, loc: 'Top' }\n            }\n        }\n    }\n\n    // ** Arrow **\n\n    public addArrow(cell: Cell, direction: Direction) {\n        const oldArrowIndex = this.arrows.findIndex(v => v.x === cell.x && v.y === cell.y)\n        const sprite = this.bodyFactory.arrow({ x: cell.x * cellSize, y: cell.y * cellSize }, direction)\n        const arrow = new Arrow(cell, direction, sprite)\n        if (oldArrowIndex != -1) {\n            this.arrows[oldArrowIndex].sprite.destroy()\n            this.arrows[oldArrowIndex] = arrow\n        } else {\n            this.arrows.push(arrow)\n            this.onUpdate(this)\n        }\n    }\n\n    // ** Fire **\n\n    public addFire(cell: Cell) {\n        const sprite = this.bodyFactory.fire(\n            { x: cell.x * cellSize, y: cell.y * cellSize },\n            { x: cellSize, y: cellSize },\n        )\n        const fire = new Fire(cell, sprite)\n        this.fires.push(fire)\n    }\n\n    // ** Exit **\n\n    public addExit(cell: Cell) {\n        const sprite = this.bodyFactory.exit(\n            { x: cell.x * cellSize, y: cell.y * cellSize },\n            { x: cellSize, y: cellSize },\n        )\n        this.exits.push(new GameObject(cell, sprite))\n    }\n\n    public tick() {\n        if (!this.isRunning()) return\n        for (const fire of this.fires) {\n            fire.tick(this)\n        }\n        for (const actor of this.actors) {\n            actor.tick(this)\n        }\n    }\n\n    public absoluteToCell(v: Vector): Cell {\n        return {\n            x: Math.round(v.x / cellSize),\n            y: Math.round(v.y / cellSize),\n        }\n    }\n\n    public cellToVector(v: Cell): Vector {\n        return {\n            x: Math.round(v.x * cellSize),\n            y: Math.round(v.y * cellSize),\n        }\n    }\n\n    public inBounds(vector: Vector): boolean {\n        return this.bounds.x >= vector.x && this.bounds.y >= vector.y && vector.y > 0 && vector.x > 0\n    }\n}\n\nfunction filterGameObjects<O extends GameObject>(cell: Cell, array: O[]): O[] {\n    const toDelete = array.filter(v => v.x === cell.x && v.y === cell.y)\n    toDelete.forEach(object => {\n        object.sprite.destroy()\n    })\n    return array.filter(v => !(v.x === cell.x && v.y === cell.y))\n}\n"],"sourceRoot":""}